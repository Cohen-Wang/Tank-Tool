<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta http-equiv="content-Type" content="text/html">
		<meta http-equiv="X-UA-Compatible" content="ie=edge" />
		<meta http-equiv="Expires" content="0"><!--设置过期时间设置0为直接过期并清除缓存-->
		<meta http-equiv="Pragma" content="no-cache"><!--HTTP 1.0遗留字段：设置不缓存页面-->
		<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
		<link rel="shortcut icon" type="image/x-icon" href="../res/images/ico/favicon.ico"><!--shortcut将被标准浏览器忽略，而仅使用icon-->
		<link rel="icon"          type="image/x-icon" href="../res/images/ico/favicon.ico"><!--Mozilla 可添加任何支持的图像格式的favicon-->
		<title>游道工作室-铁甲战队-炮弹编辑器</title>
		<link rel="stylesheet" href="../css/lib/bootstrap.css" />
		<style>
			body{background: #333;}
			.bg-info{padding: 10px;}
			.panel-heading{-moz-user-focus: none;-webkit-user-select: none; -ms-user-select: none;}
			ul{list-style: none;}/*必须要这里取消ul样式，用bootstrap的class会失去缩进*/
			.blur {
			    filter: url(blur.svg#blur); /* FireFox, Chrome, Opera */
			    -webkit-filter: blur(10px); /* Chrome, Opera */
			       -moz-filter: blur(10px);
			        -ms-filter: blur(10px);
			            filter: blur(200px);

			    filter: progid:DXImageTransform.Microsoft.Blur(PixelRadius=10, MakeShadow=false); /* IE6~IE9 */
			}
            .fileinfo{font:100 14px/34px '微软雅黑';color:red;height:34px;padding-left: 10px;padding-right: 10px;}
			.sameOption{box-sizing: border-box;border:2px solid rgb(188,232,241);border-radius: 6px;padding-top: 15px;margin-bottom: 15px;}
		</style>
	</head>
	<body>
		<!--nav S-->
		<div class="navbar navbar-default">
			<div class="container">
				<div class="navbar-header">
					<strong>
						<a href="../index.html" class="navbar-brand">HOME</a>
					</strong>
				</div>
			</div>
		</div>
		<!--nav E-->

		<div id="shellEditor">
			<!--数据栏 S-->
			<pre class="hidden-sm hidden-xs well-sm" v-show="showBulletConfig" style="position:fixed;top:70px;left:50%;margin-left:600px;width:320px;background: #eee;z-index: 9;max-height: 820px;overflow: auto;" v-text="BulletConfig"></pre>
			<!--数据栏 E-->

			<div class="container">
				<div class="row">
					<div class="panel panel-default">
						<div class="panel-body" style="min-height: 300px;">
							<!--nav S-->
							<div class="navbar navbar-default">
								<div class="collapse navbar-collapse">
									<p class="navbar-text">新建炮弹:</p>
									<div class="navbar-form navbar-left">
										<div class="form-group">
											<input type="text" class="form-control" placeholder="新炮弹ID" v-model="tempId" @keydown.enter="createNewBullet()"/>
										</div>
										<button type="button" class="btn btn-primary" @click="createNewBullet()">确定</button>
									</div>
									<p class="navbar-text">导入炮弹:</p>
									<div class="navbar-form navbar-left">
										<button type="button" class="btn btn-success btn-file">
											<span class="glyphicon glyphicon-folder-open"></span>
											<p>上传文件</p>
											<input type="file" class="btn btn-primary" style="display: inline-block;"  @change="uploadTxt(event)" />
										</button>
									</div>
									<p class="navbar-text">刷新:</p>
									<div class="navbar-form navbar-left">
										<div class="btn-group">
											<button type="button" class="btn btn-danger" @click="refreshBulletConfig()">
												<span class="glyphicon glyphicon-refresh"></span>刷新
											</button>
											<button type="button" class="btn btn-info" @click="showBulletConfig = !showBulletConfig">显示/隐藏数据</button>
										</div>
									</div>
								</div>
							</div>
							<!--nav E-->


							<div class="row" v-show="Object.keys(BulletConfig).length !== 0">
								<div class="col-md-3">
									<!--炮弹信息-->
									<div class="panel panel-warning">
										<div class="panel-heading">
											<h4 class="panel-title">炮弹信息</h4>
										</div>
										<div class="panel-body">
											<div class="form-group">
												<label>炮弹ID:</label>
												<input type="text" class="form-control" v-model="BulletConfig._id">
											</div>
											<div class="form-group">
												<label class="control-label">开火特效:</label>
												<div class="btn-group">
													<button type="button" class="btn btn-info btn-file">
														<span class="glyphicon glyphicon-folder-open"></span>
														<p>上传资源（json）</p>
														<input type="file" class="form-control" @change="addFilename(BulletConfig, 'weaponFire', 'json', event)">
													</button>
													<button type="button" class="btn btn-danger" @click="deleteFilename(BulletConfig, 'weaponFire')"><span class="glyphicon glyphicon-trash"></span></button>
												</div>
												<div class="fileinfo">{{BulletConfig.weaponFire}}</div>
											</div>
											<div class="form-group">
												<label class="control-label">开火音效:</label>
												<div class="btn-group">
													<button type="button" class="btn btn-info btn-file">
														<span class="glyphicon glyphicon-folder-open"></span>
														<p>上传音效（mp3）</p>
														<input type="file" class="form-control" @change="addFilename(BulletConfig, 'weaponSound', 'mp3', event)">
													</button>
													<button type="button" class="btn btn-danger" @click="deleteFilename(BulletConfig, 'weaponSound')"><span class="glyphicon glyphicon-trash"></span></button>
												</div>
												<div class="fileinfo">{{BulletConfig.weaponSound}}</div>
											</div>
											<div class="row">
												<div class="col-md-12">
													<label>等级范围:</label>
												</div>
												<div class="col-md-6">
													<input type="text" class="form-control" placeholder="min" v-model="minScope">
												</div>
												<div class="col-md-6">
													<input type="text" class="form-control" placeholder="max" v-model="maxScope">
												</div>
											</div>
										</div>
									</div>

									<!--tab -->
									<ul class="nav nav-tabs nav-justified">
										<li class="active"><a href="#add" data-toggle="tab">弹头信息</a></li>
										<li><a href="#tree" data-toggle="tab">树结构</a></li>
									</ul>

									<div class="tab-content" style="background: #fff;max-height: 460px;overflow: auto;">
										<!--添加弹头-->
										<div class="panel-body form-horizontal tab-pane active" id="add">
											<button type="button" class="btn btn-success btn-block" @click="addBullet()">ADD(添加弹头)</button>
											<br /><br />
											<div class="form-group" v-for="(bulletItem , bulletIndex) in BulletConfig.bullets" :style="{'border-left': bulletItem.launched == true ? '10px solid rgb(38,96,130)':''}" >
												<label class="col-md-5 control-label" v-text="'弹头ID' + bulletItem.id + ':'"></label>
												<div class="col-md-5">
													<input type="text" class="form-control" placeholder="例:0"  v-model="bulletItem.launchTime" @change="getDuration()">
												</div>
												<div class="col-md-2">
													<a href="###" class="btn btn-danger btn-xs" @click="deleteBulletOne(bulletItem , bulletIndex)" v-if="bulletItem.launched == true"><span class="glyphicon glyphicon-trash"></span></a>
												</div>
											</div>
											<div class="form-group">
												<label class="col-md-5 control-label">发射周期:</label>
												<div class="col-md-7">
													<input type="text" class="form-control" v-model="BulletConfig.launchDuration" disabled="disabled"/>
												</div>
											</div>
										</div>

										<!--树 START-->
										<div class="panel-body tab-pane" id="tree">
											<ul class="list-group">
												<li v-for="(bulletItem, bulletIndex) in BulletConfig.bullets">
													<a href="javascript:void(0);" class="btn btn-link btn-xs"><span class="glyphicon glyphicon-menu-down"  @click="treeShrink(event)"></span></a>
													<a class="btn btn-link treeLink" style="padding-left:0;padding-right: 0;" :style="{'background': bulletIndex == 0 ? 'rgb(217 , 237 , 247)':''}" @click="treeSwitch(bulletIndex,-1,-1,-1,event)" v-text="'弹头ID' + bulletItem.id + ':'"></a><small class="bg-warning text-danger" v-show="bulletItem.launched == false">生成于炮弹{{bulletItem._createdBy}}</small>
													<ul style="overflow: hidden;transition: all .2s;">
														<li v-for="(cycleItem, cycleIndex) in bulletItem.cycles">
															<a href="javascript:void(0);" class="btn btn-link btn-xs"><span class="glyphicon glyphicon-menu-down"  @click="treeShrink(event)"></span> </a>
															<a href="javascript:void(0);" class="btn btn-link" style="padding-left:0;padding-right: 0;" @click="cycleHint(cycleItem)" v-text="'轨迹阶段' + (cycleIndex + 1)"></a>
															<ul style="overflow: hidden;transition: all .2s;">
																<li>
																	<a href="javascript:void(0);" class="btn btn-link treeLink" @click="treeSwitch(bulletIndex, cycleIndex,-1,-1)">运动轨迹</a>
																</li>
																<li v-for="(triggerItem, triggerIndex) in cycleItem.triggers" style="margin-bottom: 6px;">
																	<div class="btn-group">
																		<a class="btn btn-warning btn-sm treeLink" @click="treeSwitch(bulletIndex, cycleIndex, triggerIndex, 0)"  :id="'trigger' + bulletIndex + cycleIndex + triggerIndex">触发条件{{triggerIndex+1}}</a>
																		<a class="btn btn-danger btn-sm" @click="deleteTrigger(bulletIndex, cycleIndex, triggerIndex)">
																			<span class="glyphicon glyphicon-trash"></span>
																		</a>
																	</div>
																</li>
																<li>
																	<button type="button" class="btn btn-link" @click="addTrigger(bulletIndex, cycleIndex)">
																		<span class="glyphicon glyphicon-plus"></span>
																		添加条件
																	</button>
																</li>
															</ul>
														</li>
													</ul>
												</li>
											</ul>
										</div>
										<!--树 END-->
									</div>
								</div>

								<!--编辑区 START-->
								<div class="col-md-9"  v-for="(bulletItem , bulletIndex) in BulletConfig.bullets" v-show="nowIndex.bullet == bulletIndex">
									<div class="panel panel-info">
										<div class="panel-heading">
											<h4 class="panel-title" v-text="'弹头ID' + bulletItem.id + ':'"></h4>
										</div>
										<div class="panel-body" >
											<div v-show="nowIndex.bullet == bulletIndex && nowIndex.cycle == -1 && nowIndex.trigger == -1">
												<h5 class="bg-info" v-text="'弹头' + (bulletIndex + 1) + '样式'">  </h5>
												<div class="form-horizontal">

													<div class="form-group">
														<label class="col-md-3 control-label">弹头资源类型:</label>
														<div class="btn-group col-md-9" data-toggle="buttons">
															<label class="btn btn-info" :class="{active:bulletItem._imageType === 1}" @click="bulletImageChange(bulletItem, 1);">
																<input type="radio" name="shape" value="circle" >png
															</label>
															<label class="btn btn-info" :class="{active:bulletItem._imageType === 2}" @click="bulletImageChange(bulletItem, 2);">
																<input type="radio" name="shape" value="rectangle">json
															</label>
														</div>
													</div>

													<div class="sameOption" v-if="bulletItem._imageType == '1'">
														<div class="form-group">
															<label class="col-md-3 control-label">png资源:</label>
															<div class="col-md-4">
																<div class="btn-group">
																	<button type="button" class="btn btn-info btn-file">
																		<span class="glyphicon glyphicon-folder-open"></span>
																		<p>上传资源（png）</p>
																		<input type="file" class="form-control" @change="addFilename(bulletItem, 'image', 'png', event)">
																	</button>
																	<button type="button" class="btn btn-danger" @click="deleteFilename(bulletItem, 'image')"><span class="glyphicon glyphicon-trash"></span></button>
																</div>
															</div>
															<div class="col-md-3 fileinfo">{{bulletItem.image}}</div>
														</div>
													</div>

													<div class="sameOption" v-if="bulletItem._imageType == '2'">
														<div class="form-group">
															<label class="col-md-3 control-label">spine资源:</label>
															<div class="col-md-4">
																<div class="btn-group">
																	<button type="button" class="btn btn-info btn-file">
																		<span class="glyphicon glyphicon-folder-open"></span>
																		<p>上传资源（json）</p>
																		<input type="file" class="form-control" @change="openSpineOfBullet(bulletIndex, event)">
																	</button>
																	<button type="button" class="btn btn-danger" @click="deleteSpineOfBullet(bulletIndex)"><span class="glyphicon glyphicon-trash"></span></button>
																</div>
															</div>
															<div class="col-md-3 fileinfo">{{bulletItem.spineName}}</div>
														</div>
														<div class="form-group">
															<label class="col-md-3 control-label">动画:</label>
															<div class="col-md-4">
																<select class="form-control" v-model="bulletItem.animation">
																	<option v-for="(animation, animationIndex) in bulletItem._animations" :value="animation" v-html="animation"></option>
																</select>
															</div>
														</div>
														<div class="form-group">
															<label class="col-md-3 control-label">动画是否持续播放:</label>
															<div class="btn-group col-md-9" data-toggle="buttons">
																<label class="btn btn-info" :class="{active:bulletItem.keepPlay === true}" @click="bulletItem.keepPlay = true">
																	<input type="radio" name="keepPlay">是
																</label>
																<label class="btn btn-info" :class="{active:bulletItem.keepPlay === false}" @click="bulletItem.keepPlay = false">
																	<input type="radio" name="keepPlay">无
																</label>
															</div>
														</div>
													</div>

													<div class="form-group">
														<label class="col-md-3 control-label">尾焰:</label>
														<div class="col-md-4">
															<div class="btn-group">
																<button type="button" class="btn btn-info btn-file">
																	<span class="glyphicon glyphicon-folder-open"></span>
																	<p>上传文件（plist）</p>
																	<input type="file" class="form-control" @change="addFilename(bulletItem, 'wake', 'plist', event)">
																</button>
																<button type="button" class="btn btn-danger" @click="deleteFilename(bulletItem, 'wake')"><span class="glyphicon glyphicon-trash"></span></button>
															</div>
														</div>
														<div class="col-md-3 fileinfo">{{bulletItem.wake}}</div>
													</div>

													<div class="form-group">
														<label class="col-md-3 control-label">火焰:</label>
														<div class="col-md-4">
															<div class="btn-group">
																<button type="button" class="btn btn-info btn-file">
																	<span class="glyphicon glyphicon-folder-open"></span>
																	<p>上传文件（json）</p>
																	<input type="file" class="form-control" @change="openJSONOfFire(bulletIndex, event)">
																</button>
																<button type="button" class="btn btn-danger" @click="deleteJSONOfFire(bulletIndex)"><span class="glyphicon glyphicon-trash"></span></button>
															</div>
														</div>
														<div class="col-md-3 fileinfo">{{bulletItem.fire}}</div>
													</div>
													<div class="form-group">
														<label class="col-md-3 control-label">火焰动画:</label>
														<div class="col-md-4">
															<select class="form-control" v-model="bulletItem.fireAnimation">
																<option v-for="(fireAnimation, fireAnimationIndex) in bulletItem._fireAnimations" :value="fireAnimation" v-html="fireAnimation"></option>
															</select>
														</div>
													</div>


													<div class="form-group">
														<label class="col-md-3 control-label">初速度:</label>
														<div class="col-md-4">
															<input type="text" class="form-control" v-model="bulletItem.speed">
														</div>
													</div>

													<div class="form-group">
														<label class="col-md-3 control-label">物理形状:</label>
														<div class="btn-group col-md-9" data-toggle="buttons">
															<label class="btn btn-info" :class="{active:bulletItem.physicsShape.type===0}" @click="bulletPhysicsShapeChange(bulletItem,0);">
																<input type="radio" name="physicsDefine">无
															</label>
															<label class="btn btn-info" :class="{active:bulletItem.physicsShape.type===4}" @click="bulletPhysicsShapeChange(bulletItem,4);">
																<input type="radio" name="physicsDefine">点
															</label>
															<label class="btn btn-info" :class="{active:bulletItem.physicsShape.type===2}" @click="bulletPhysicsShapeChange(bulletItem,2);">
																<input type="radio" name="physicsDefine">方形
															</label>
															<label class="btn btn-info" :class="{active:bulletItem.physicsShape.type===3}" @click="bulletPhysicsShapeChange(bulletItem,3);">
																<input type="radio" name="physicsDefine">圆形
															</label>
															<label class="btn btn-info" :class="{active:bulletItem.physicsShape.type===1}" @click="bulletPhysicsShapeChange(bulletItem,1);">
																<input type="radio" name="physicsDefine">线段
															</label>
															<label class="btn btn-info" :class="{active:bulletItem.physicsShape.type===5}" @click="bulletPhysicsShapeChange(bulletItem,5);">
																<input type="radio" name="physicsDefine">射线
															</label>
														</div>
													</div>

													<div class="sameOption" v-if="bulletItem.physicsShape.type===1">
														<div class="form-group">
															<label class="col-md-3 control-label">长度:</label>
															<div class="col-md-2">
																<input type="text" class="form-control" placeholder="暂无填写" disabled>
															</div>
														</div>
													</div>

													<div class="sameOption" v-if="bulletItem.physicsShape.type===2">
														<div class="form-group">
															<label class="col-md-3 control-label">宽:</label>
															<div class="col-md-2">
																<input type="text" class="form-control" name="width" v-model="bulletItem.physicsShape.width" @blur="drawCanvas(bulletItem,bulletIndex)">
															</div>
															<label class="col-md-2 control-label">高:</label>
															<div class="col-md-2">
																<input type="text" class="form-control" name="height" v-model="bulletItem.physicsShape.height" @blur="drawCanvas(bulletItem,bulletIndex)">
															</div>
														</div>
													</div>

													<div class="sameOption" v-if="bulletItem.physicsShape.type===3">
														<div class="form-group">
															<label class="col-md-3 control-label">半径:</label>
															<div class="col-md-2">
																<input type="text" class="form-control" name="radius" v-model="bulletItem.physicsShape.radius" @blur="drawCanvas(bulletItem,bulletIndex)">
															</div>
														</div>
													</div>

													<div class="sameOption" v-if="bulletItem.physicsShape.type===4">
														<div class="form-group">
															<label class="col-md-3 control-label"></label>
															<div class="col-md-2">
																<input type="text" class="form-control" placeholder="无需填写" disabled>
															</div>
														</div>
													</div>

													<div class="form-group">
														<label class="col-md-3 control-label">弹头形状:</label>
														<div class="btn-group col-md-9" data-toggle="buttons">
															<label class="btn btn-info" :class="{active:bulletItem.bulletShape.type===0}" @click="bulletShapeChange(bulletItem,0);">
																<input type="radio" name="shape">无
															</label>
															<label class="btn btn-info" disabled="">
																<input type="radio" name="shape">点
															</label>
															<label class="btn btn-info" :class="{active:bulletItem.bulletShape.type===2}" @click="bulletShapeChange(bulletItem,2);">
																<input type="radio" name="shape">方块
															</label>
															<label class="btn btn-info" :class="{active:bulletItem.bulletShape.type===3}" @click="bulletShapeChange(bulletItem,3);">
																<input type="radio" name="shape">圆形
															</label>
															<label class="btn btn-info" disabled="">
																<input type="radio" name="shape">线段
															</label>
															<label class="btn btn-info" :class="{active:bulletItem.bulletShape.type===5}" @click="bulletShapeChange(bulletItem,5);">
																<input type="radio" name="shape">射线
															</label>
														</div>
													</div>

													<div class="sameOption">
														<div class="form-group" v-if="bulletItem.bulletShape !== ''">
															<label class="col-md-3 control-label">锚点x:</label>
															<div class="col-md-2">
																<input type="text" class="form-control" v-model="bulletItem.bulletShape.anchorX" @blur="drawCanvas(bulletItem,bulletIndex)">
															</div>
															<label class="col-md-2 control-label">锚点y:</label>
															<div class="col-md-2">
																<input type="text" class="form-control" v-model="bulletItem.bulletShape.anchorY" @blur="drawCanvas(bulletItem,bulletIndex)">
															</div>
														</div>

														<div class="form-group" v-if="bulletItem.bulletShape.type === 3">
															<label class="col-md-3 control-label">半径:</label>
															<div class="col-md-2">
																<input type="text" class="form-control" v-model="bulletItem.bulletShape.radius" @blur="drawCanvas(bulletItem,bulletIndex)">
															</div>
														</div>

														<div class="form-group" v-if="bulletItem.bulletShape.type === 2">
															<label class="col-md-3 control-label">宽:</label>
															<div class="col-md-2">
																<input type="text" class="form-control" v-model="bulletItem.bulletShape.width" @blur="drawCanvas(bulletItem,bulletIndex)">
															</div>
															<label class="col-md-2 control-label">高:</label>
															<div class="col-md-2">
																<input type="text" class="form-control" v-model="bulletItem.bulletShape.height" @blur="drawCanvas(bulletItem,bulletIndex)">
															</div>
														</div>

														<div class="hidden-sm hidden-xs" style="position:fixed;top:70px;left:10px;" v-show="nowIndex.bullet == bulletIndex && nowIndex.cycle == -1 && nowIndex.trigger == -1">
															<p class="lead" style="background-color: #fff;" v-text="'弹头'+(bulletIndex+1)"></p>
															<canvas :id="'bullet'+bulletIndex" style="background-color: #666;"></canvas>
														</div>
													</div>

													<div class="form-group">
														<label class="col-md-3 control-label">质量:</label>
														<div class="col-md-4">
															<input type="text" class="form-control" v-model="bulletItem.mass">
														</div>
													</div>
													<div class="form-group">
														<label class="col-md-3 control-label">旋转速度:</label>
														<div class="col-md-4">
															<input type="text" class="form-control" name="rotationMoment" v-model="bulletItem.rotationMoment">
														</div>
													</div>
													<div class="form-group">
														<label class="col-md-3 control-label">镜头跟随:</label>
														<div class="btn-group col-md-9" data-toggle="buttons">
															<label class="btn btn-info" :class="{active:bulletItem.isFollowByCamera===true}" @click="bulletItem.isFollowByCamera=true">
																<input type="radio" name="isFollowByCamera">跟随
															</label>
															<label class="btn btn-info" :class="{active:bulletItem.isFollowByCamera===false}" @click="bulletItem.isFollowByCamera=false">
																<input type="radio" name="isFollowByCamera">不跟随
															</label>
														</div>
													</div>
												</div>
												<hr />
											</div>

											<div class="form-horizontal" v-for="(cycleItem,cycleIndex) in bulletItem.cycles" >
												<div v-show="nowIndex.bullet == bulletIndex && nowIndex.cycle == cycleIndex && nowIndex.trigger == -1">
													<h5 class="bg-info">运动轨迹:{{cycleIndex + 1}} (弹头{{bulletIndex+1}}_轨迹{{cycleIndex+1}})</h5>
													<div class="form-group">
														<label class="col-md-3 control-label">运动轨迹类型:</label>
														<div class="col-md-4">
															<select class="form-control" v-model="cycleItem.motionMode" @change="motionModeChange(cycleItem)">
																<option value="0" disabled="disabled">请选择运动轨迹类型</option>
																<option value="1">飞行</option>
																<option value="2">滚动</option>
																<option value="3">弹跳</option>
																<option value="4">粘着</option>
																<option value="5">激光</option>
															</select>
														</div>
													</div>

													<div v-if="cycleItem.motionMode === '1'">
														<div class="form-group">
															<label class="col-md-3 control-label">起始点:</label>
															<div class="btn-group col-md-3">
																<button type="button" class="btn btn-info" :class="{active:cycleItem.isOffsetCoord === true }" @click="cycleItem.isOffsetCoord = true">相对偏移</button>
																<button type="button" class="btn btn-info" :class="{active:cycleItem.isOffsetCoord === false }" @click="cycleItem.isOffsetCoord = false">绝对偏移</button>
															</div>
															<label class="col-md-1 control-label">X:</label>
															<div class="col-md-2">
																<input type="text" class="form-control" v-model="cycleItem.x">
															</div>
															<label class="col-md-1 control-label">Y:</label>
															<div class="col-md-2">
																<input type="text" class="form-control" v-model="cycleItem.y">
															</div>
														</div>
														<div class="form-group">
															<label class="col-md-3 control-label">飞行角度:</label>
															<div class="btn-group col-md-3">
																<button type="button" class="btn btn-info"  :class="{active:cycleItem.isOffsetRotation === true }" @click="cycleItem.isOffsetRotation = true">偏移方向</button>
																<button type="button" class="btn btn-info"  :class="{active:cycleItem.isOffsetRotation === false }" @click="cycleItem.isOffsetRotation = false">绝对方向</button>
															</div>
															<label class="col-md-2 control-label">角度:</label>
															<div class="col-md-3">
																<input type="text" class="form-control" v-model="cycleItem.rotation">
															</div>
														</div>
														<div class="form-group">
															<label class="col-md-3 control-label">飞行速度:</label>
															<div class="btn-group col-md-3">
																<button type="button" class="btn btn-info" :class="{active:cycleItem.isOffsetSpeed === true }" @click="cycleItem.isOffsetSpeed = true">偏移速度</button>
																<button type="button" class="btn btn-info" :class="{active:cycleItem.isOffsetSpeed === false }" @click="cycleItem.isOffsetSpeed = false">绝对速度</button>
															</div>
															<label class="col-md-2 control-label">飞行速度:</label>
															<div class="col-md-3">
																<input type="text" class="form-control" v-model="cycleItem.speed">
															</div>
														</div>
														<div class="form-group">
															<label class="col-md-3 control-label">是否受风力影响:</label>
															<div class="btn-group col-md-5">
																<button type="button" class="btn btn-info" :class="{active:cycleItem.influenced === true}" @click="cycleItem.influenced = true">是</button>
																<button type="button" class="btn btn-info" :class="{active:cycleItem.influenced === false}" @click="cycleItem.influenced = false">否</button>
															</div>
														</div>
														<div class="form-group">
															<label class="col-md-3 control-label">飞行模式:</label>
															<div class="btn-group col-md-5">
																<button type="button" class="btn btn-info" :class="{active:cycleItem.flyMode === 1 }" @click="cycleItem.flyMode = 1">抛物线</button>
																<button type="button" class="btn btn-info" :class="{active:cycleItem.flyMode === 2 }" @click="cycleItem.flyMode = 2">直线</button>
															</div>
														</div>
														<div class="form-group">
															<label class="col-md-3 control-label">飞行音效:</label>
															<div class="col-md-4">
																<div class="btn-group">
																	<button type="button" class="btn btn-info btn-file">
																		<span class="glyphicon glyphicon-folder-open"></span>
																		<p>上传音效（mp3）</p>
																		<input type="file" class="form-control" @change="addFilename(cycleItem, 'flySound', 'mp3', event)">
																	</button>
																	<button type="button" class="btn btn-danger" @click="deleteFilename(cycleItem, 'flySound')"><span class="glyphicon glyphicon-trash"></span></button>
																</div>
															</div>
															<div class="fileinfo">{{cycleItem.flySound}}</div>
														</div>

														<div class="form-group">
															<label class="col-md-3 control-label">阻力损失:</label>
															<div class="col-md-4">
																<input type="text" class="form-control" v-model="cycleItem.obstructionLoss">
															</div>
														</div>

														<div class="sameOption">
															<div class="form-group">
																<label class="col-md-3 control-label">旋转方式:</label>
																<div class="btn-group col-md-5">
																	<button type="button" class="btn btn-info" :class="{active:cycleItem.rotateMode === 1 }" @click="cycleItem.rotateMode = 1; cycleItem.fixedRotation = 0">不旋转</button>
																	<button type="button" class="btn btn-info" :class="{active:cycleItem.rotateMode === 2 }" @click="cycleItem.rotateMode = 2; cycleItem.fixedRotation = 0">自旋转</button>
																	<button type="button" class="btn btn-info" :class="{active:cycleItem.rotateMode === 3 }" @click="cycleItem.rotateMode = 3; cycleItem.fixedRotation = 0">随轨迹旋转</button>
																	<button type="button" class="btn btn-info" :class="{active:cycleItem.rotateMode === 4 }" @click="cycleItem.rotateMode = 4">固定</button>
																</div>
															</div>

															<div class="form-group" v-show="cycleItem.rotateMode === 4">
																<label class="col-md-3 control-label">固定角度:</label>
																<div class="col-md-4">
																	<input type="text" class="form-control" v-model="cycleItem.fixedRotation">
																</div>
															</div>
														</div>

														<div class="form-group">
															<label class="col-md-3 control-label">跟踪效果:</label>
															<div class="btn-group col-md-5">
																<button type="button" class="btn btn-info" :class="{active:cycleItem.isTrack === false }" @click="trackModeChange(cycleItem, false)">否</button>
																<button type="button" class="btn btn-info" :class="{active:cycleItem.isTrack === true }"  @click="trackModeChange(cycleItem, true)" >是</button>
															</div>
														</div>

														<div class="sameOption" v-if="cycleItem.isTrack === true">
															<div class="form-group">
																<label class="col-md-3 control-label">跟踪范围:</label>
																<div class="col-md-4">
																	<input type="text" class="form-control" v-model="cycleItem.trackRange">
																</div>
															</div>
															<div class="form-group">
																<label class="col-md-3 control-label">跟踪角度:</label>
																<div class="col-md-4">
																	<input type="text" class="form-control" v-model="cycleItem.trackAngle">
																</div>
															</div>
															<div class="form-group">
																<label class="col-md-3 control-label">跟踪目标:</label>
																<div class="btn-group col-md-5">
																	<button type="button" class="btn btn-info" :class="{active:cycleItem.trackTarget === 1 }" @click="cycleItem.trackTarget = 1">友方</button>
																	<button type="button" class="btn btn-info" :class="{active:cycleItem.trackTarget === 2 }" @click="cycleItem.trackTarget = 2">敌方</button>
																	<button type="button" class="btn btn-info" :class="{active:cycleItem.trackTarget === 3 }" @click="cycleItem.trackTarget = 3">双方</button>
																</div>
															</div>
															<div class="form-group">
																<label class="col-md-3 control-label">跟踪音效:</label>
																<div class="col-md-4">
																	<div class="btn-group">
																		<button type="button" class="btn btn-info btn-file">
																			<span class="glyphicon glyphicon-folder-open"></span>
																			<p>上传音效（mp3）</p>
																			<input type="file" class="form-control" @change="addFilename(cycleItem, 'trackSound', 'mp3', event)">
																		</button>
																		<button type="button" class="btn btn-danger" @click="deleteFilename(cycleItem, 'trackSound')"><span class="glyphicon glyphicon-trash"></span></button>
																	</div>
																</div>
																<div class="fileinfo">{{cycleItem.trackSound}}</div>
															</div>
														</div>
													</div>

													<div v-if="cycleItem.motionMode === '2'">
														<div class="form-group">
															<label class="col-md-3 control-label">滚动距离:</label>
															<div class="col-md-4">
																<input type="text" class="form-control" v-model="cycleItem.rollDistence">
															</div>
														</div>
														<div class="form-group">
															<label class="col-md-3 control-label">滚动速度:</label>
															<div class="col-md-4">
																<input type="text" class="form-control" v-model="cycleItem.rollSpeed">
															</div>
														</div>
														<div class="form-group">
															<label class="col-md-3 control-label">滚动音效:</label>
															<div class="col-md-4">
																<div class="btn-group">
																	<button type="button" class="btn btn-info btn-file">
																		<span class="glyphicon glyphicon-folder-open"></span>
																		<p>上传音效（mp3）</p>
																		<input type="file" class="form-control" @change="addFilename(cycleItem, 'rollSound', 'mp3', event)">
																	</button>
																	<button type="button" class="btn btn-danger" @click="deleteFilename(cycleItem, 'rollSound')"><span class="glyphicon glyphicon-trash"></span></button>
																</div>
															</div>
															<div class="fileinfo">{{cycleItem.rollSound}}</div>
														</div>
													</div>

													<div v-if="cycleItem.motionMode === '3'">
														<div class="form-group">
															<label class="col-md-3 control-label">弹力损失:</label>
															<div class="col-md-4">
																<input type="text" class="form-control" v-model="cycleItem.elasticityLoss">
															</div>
														</div>
														<div class="form-group">
															<label class="col-md-3 control-label">阻力损失:</label>
															<div class="col-md-4">
																<input type="text" class="form-control" v-model="cycleItem.obstructionLoss">
															</div>
														</div>
														<div class="form-group">
															<label class="col-md-3 control-label">是否继续弹跳:</label>
															<div class="btn-group col-md-9" data-toggle="buttons">
																<label class="btn btn-info" :class="{active:cycleItem.keepJump===true}" @click="cycleItem.keepJump=true">
																	<input type="radio" name="keepJump">是
																</label>
																<label class="btn btn-info" :class="{active:cycleItem.keepJump===false}" @click="cycleItem.keepJump=false">
																	<input type="radio" name="keepJump">否
																</label>
															</div>
														</div>
														<div class="form-group">
															<label class="col-md-3 control-label">弹跳音效1:</label>
															<div class="col-md-4">
																<div class="btn-group">
																	<button type="button" class="btn btn-info btn-file">
																		<span class="glyphicon glyphicon-folder-open"></span>
																		<p>上传音效（mp3）</p>
																		<input type="file" class="form-control" @change="addFilename(cycleItem, 'jumpSound1', 'mp3', event)">
																	</button>
																	<button type="button" class="btn btn-danger" @click="deleteFilename(cycleItem, 'jumpSound1')"><span class="glyphicon glyphicon-trash"></span></button>
																</div>
															</div>
															<div class="fileinfo">{{cycleItem.jumpSound1}}</div>
														</div>
														<div class="form-group">
															<label class="col-md-3 control-label">弹跳音效2:</label>
															<div class="col-md-4">
																<div class="btn-group">
																	<button type="button" class="btn btn-info btn-file">
																		<span class="glyphicon glyphicon-folder-open"></span>
																		<p>上传音效（mp3）</p>
																		<input type="file" class="form-control" @change="addFilename(cycleItem, 'jumpSound2', 'mp3', event)">
																	</button>
																	<button type="button" class="btn btn-danger" @click="deleteFilename(cycleItem, 'jumpSound2')"><span class="glyphicon glyphicon-trash"></span></button>
																</div>
															</div>
															<div class="fileinfo">{{cycleItem.jumpSound2}}</div>
														</div>
														<div class="form-group">
															<label class="col-md-3 control-label">弹跳音效3:</label>
															<div class="col-md-4">
																<div class="btn-group">
																	<button type="button" class="btn btn-info btn-file">
																		<span class="glyphicon glyphicon-folder-open"></span>
																		<p>上传音效（mp3）</p>
																		<input type="file" class="form-control" @change="addFilename(cycleItem, 'jumpSound3', 'mp3', event)">
																	</button>
																	<button type="button" class="btn btn-danger" @click="deleteFilename(cycleItem, 'jumpSound3')"><span class="glyphicon glyphicon-trash"></span></button>
																</div>
															</div>
															<div class="fileinfo">{{cycleItem.jumpSound3}}</div>
														</div>
														<div class="form-group">
															<label class="col-md-3 control-label">弹跳音效4:</label>
															<div class="col-md-4">
																<div class="btn-group">
																	<button type="button" class="btn btn-info btn-file">
																		<span class="glyphicon glyphicon-folder-open"></span>
																		<p>上传音效（mp3）</p>
																		<input type="file" class="form-control" @change="addFilename(cycleItem, 'jumpSound4', 'mp3', event)">
																	</button>
																	<button type="button" class="btn btn-danger" @click="deleteFilename(cycleItem, 'jumpSound4')"><span class="glyphicon glyphicon-trash"></span></button>
																</div>
															</div>
															<div class="fileinfo">{{cycleItem.jumpSound4}}</div>
														</div>
													</div>

													<div v-if="cycleItem.motionMode === '4'">
														<div class="text-danger text-center">
															<h2>无选择</h2>
														</div>
													</div>

													<div v-if="cycleItem.motionMode === '5'">
														<div class="form-group">
															<label class="col-md-3 control-label">是否穿透:</label>
															<div class="btn-group col-md-9" data-toggle="buttons">
																<label class="btn btn-info" :class="{active:cycleItem.penetrate===true}" @click="cycleItem.penetrate=true">
																	<input type="radio" name="penetrate">是
																</label>
																<label class="btn btn-info" :class="{active:cycleItem.penetrate===false}" @click="cycleItem.penetrate=false">
																	<input type="radio" name="penetrate">否
																</label>
															</div>
														</div>
													</div>
												</div>

												<div class="form-horizontal" v-for="(triggerItem,triggerIndex) in cycleItem.triggers" >
													<div v-show="nowIndex.bullet == bulletIndex && nowIndex.cycle == cycleIndex && nowIndex.trigger == triggerIndex">
														<h5 class="bg-info"> 触发条件 {{triggerIndex+1}}:(弹头{{bulletIndex+1}}_轨迹{{cycleIndex+1}}_触发{{triggerIndex+1}})</h5>
														<div class="form-group">
															<label class="col-md-3 control-label">请选择触发条件:</label>
															<div class="col-md-4">
																<select class="form-control" v-model="triggerItem.triggerMode" @change="triggerModeChange(triggerItem)">
																	<option value="0" disabled="disabled">请选择触发条件</option>
																	<option value="1">时间</option>
																	<option value="2">行进距离</option>
																	<option value="3">接触（地形）</option>
																	<option value="4">接触（战车）</option>
																	<option value="5">定点</option>
																	<option value="6">静止</option>
																	<option value="7">距离地面高度</option>
																	<option value="8">手动触发</option>
																</select>
															</div>
														</div>

														<div class="form-group" v-if="triggerItem.triggerMode === '1'">
															<label class="col-md-3 control-label">时间:</label>
															<div class="col-md-4">
																<input type="text" class="form-control" v-model="triggerItem.triggerParams">
															</div>
														</div>

														<div class="form-group" v-if="triggerItem.triggerMode === '2'">
															<label class="col-md-3 control-label">行进距离:</label>
															<div class="col-md-4">
																<input type="text" class="form-control" v-model="triggerItem.triggerParams">
															</div>
														</div>

														<div class="form-group" v-if="triggerItem.triggerMode === '3'">
															<label class="col-md-3 control-label">接触（地形）:</label>
															<div class="col-md-4 text-danger">
																<b style="display:inline-block;line-height: 34px;">暂无内容</b>
															</div>
														</div>

														<div class="form-group" v-if="triggerItem.triggerMode === '4'" style="height: 34px;">
															<label class="col-md-3 control-label">接触（战车）:</label>
															<div class="btn-group col-md-9">
																<button type="button" class="btn btn-info" :class="{active:triggerItem.triggerParams === 1}" @click="triggerItem.triggerParams = 1">友方战车</button>
																<button type="button" class="btn btn-info" :class="{active:triggerItem.triggerParams === 2}" @click="triggerItem.triggerParams = 2">敌方战车</button>
																<button type="button" class="btn btn-info" :class="{active:triggerItem.triggerParams === 3}" @click="triggerItem.triggerParams = 3">双方战车</button>
															</div>
														</div>
														<div class="form-group" v-if="triggerItem.triggerMode === '5'">
															<label class="col-md-3 control-label">指定位置:</label>
															<div class="col-md-3">
																<input type="text" class="form-control" v-model="triggerItem.triggerParams.x">
															</div>
															<div class="col-md-3">
																<input type="text" class="form-control" v-model="triggerItem.triggerParams.y">
															</div>
														</div>
														<div class="form-group" v-if="triggerItem.triggerMode === '6'">
															<label class="col-md-3 control-label">静止: </label>
															<div class="col-md-4 text-danger">
																<b style="display:inline-block;line-height: 34px;">暂无内容</b>
															</div>
														</div>
														<div class="form-group" v-if="triggerItem.triggerMode === '7'">
															<div class="form-group">
																<label class="col-md-3 control-label">高度:</label>
																<div class="col-md-4">
																	<input type="text" class="form-control" v-model="triggerItem.triggerParams.height">
																</div>
															</div>
															<div class="form-group">
																<label class="col-md-3 control-label">角度:</label>
																<div class="col-md-4">
																	<input type="text" class="form-control" v-model="triggerItem.triggerParams.angle">
																</div>
															</div>
														</div>
														<div class="form-group" v-if="triggerItem.triggerMode === '8'">
															<label class="col-md-3 control-label">手动触发: </label>
															<div class="col-md-4 text-danger">
																<b style="display:inline-block;line-height: 34px;">你选择了手动触发</b>
															</div>
														</div>
														<hr />

														<div class="form-horizontal col-md-3">
															<ul class="list-group">
																<li class="clearfix"  style="margin-bottom: 5px;" v-for="(effectItem, effectIndex) in triggerItem.effects">
																	<div class="btn-group">
																		<a class="btn btn-sm btn-warning effectSwitch"  :id="'effect' + bulletIndex + cycleIndex + triggerIndex + effectIndex"  @click="effectSwitch(effectIndex)">触发结果 {{effectIndex+1}}</a>&nbsp;&nbsp;&nbsp;
																		<a class="btn btn-danger btn-sm" @click="deleteEffect(bulletIndex, cycleIndex, triggerIndex, effectIndex)">
																			<span class="glyphicon glyphicon-trash"></span>
																		</a>
																	</div>
																</li>
															</ul>
															<button type="button" class="btn btn-success btn-sm" @click="addEffect(bulletIndex , cycleIndex, triggerIndex)">添加结果</button>
														</div>

														<div class="form-horizontal col-md-9" v-show="effectIndex == nowIndex.effect" v-for="(effectItem,effectIndex) in triggerItem.effects">
															<h5 class="bg-info"> 触发结果 {{effectIndex+1}}:(弹头{{bulletIndex+1}}_轨迹{{cycleIndex+1}}_触发{{triggerIndex+1}}_结果{{effectIndex+1}})</h5>
															<div class="form-group">
																<label class="col-md-3 control-label">触发结果类型:</label>
																<div class="col-md-6">
																	<select class="form-control" v-model="effectItem._tempEffectMode" @change="effectModeChange(bulletIndex, cycleIndex, triggerIndex, effectIndex, effectItem)">
																		<option value="0" disabled="disabled">请选择触发结果类型</option>
																		<option value="1">1 ---- ADD（新轨迹）</option>
																		<option value="2" disabled="disabled">2 ---- 空</option>
																		<option value="3">3 ---- 效果</option>
																		<option value="4">4 ---- 地形</option>
																		<option value="5">5 ---- 美术</option>
																		<option value="6">6 ---- ADD（新弹头）</option>
																		<option value="7">7 ---- END</option>
																		<option value="8">8 ---- 播放动画</option>
																	</select>
																</div>
															</div>

															<div v-if="effectItem.effectMode === 1" >
																<h1 class="text-center text-danger">已添加运动轨迹</h1>
															</div>

															<div v-if="effectItem.effectMode === 2" >
																<!--效果（值）以删除，在config里面有保存-->
															</div>

															<!--↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓buffid↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓↓-->
															<div v-if="effectItem.effectMode === 3">
																<div class="form-group">
																	<label class="col-md-3 control-label">定义效果方式:</label>
																	<div class="btn-group col-md-9" data-toggle="buttons">
																		<label class="btn btn-default" :class="{active:effectItem._method === 1 }" @click="effectItemMethod(effectItem, 1)">
																			<input type="radio"  checked="checked">填写id
																		</label>
																		<label class="btn btn-default" :class="{active:effectItem._method === 2 }" @click="effectItemMethod(effectItem, 2)">
																			<input type="radio">自定义效果
																		</label>
																	</div>
																</div>

																<div class="form-group">
																	<label class="col-md-3 control-label">影响对象:</label>
																	<div class="btn-group col-md-9">
																		<button type="button" class="btn btn-info" :class="{active:effectItem.effectParams.target === 1 }" @click="effectItem.effectParams.target = 1">友方战车</button>
																		<button type="button" class="btn btn-info" :class="{active:effectItem.effectParams.target === 2 }" @click="effectItem.effectParams.target = 2">敌方战车</button>
																		<button type="button" class="btn btn-info" :class="{active:effectItem.effectParams.target === 3 }" @click="effectItem.effectParams.target = 3">双方战车</button>
																		<button type="button" class="btn btn-info" :class="{active:effectItem.effectParams.target === 4 }" @click="effectItem.effectParams.target = 4;effectItem.effectParams.range = 0">无影响对象</button>
																	</div>
																</div>
																<div class="form-group">
																	<label class="col-md-3 control-label">影响范围:</label>
																	<div class="col-md-4">
																		<input type="text" class="form-control" v-model="effectItem.effectParams.range">
																	</div>
																</div>
																<hr>

																<div v-if="effectItem._method === 1">
																	<div class="form-group">
																		<label class="col-md-5 control-label">效果ID:</label>
																		<div class="col-md-5">
																			<input type="text" class="form-control" placeholder="填写一个效果id" v-model="effectItem.effectParams._effectId">
																		</div>
																	</div>
																</div>

																<div v-if="effectItem._method === 2">
																	<div class="form-group">
																		<label class="col-md-5 control-label">效果类型:</label>
																		<div class="col-md-6">
																			<select class="form-control" @change="effectIdChange(effectItem, event)" v-model="effectItem.effectParams.effect.effect_type" >
																				<option value="0" disabled="disabled">—————请选择—————</option>
																				<!--遍历buff的效果类型 S-->
																				<option v-for="(buffItem, buffIndex) in buffConfig" :value="buffItem.skill_effect" :disabled="typeof buffItem.describe === 'undefined'" v-html="buffItem.skill_effect + ' &nbsp;&nbsp;---- ' + buffItem.introduce"></option>
																				<!--遍历buff的效果类型 E-->
																			</select>
																		</div>
																	</div>

																	<div class="form-group">
																		<label class="col-md-5 control-label">持续回合:</label>
																		<div class="col-md-5">
																			<input type="text" class="form-control" placeholder="0:生效1次;-1:永久" v-model="effectItem.effectParams.effect.round">
																		</div>
																	</div>
																	<div class="form-group">
																		<label class="col-md-5 control-label">动作:</label>
																		<div class="col-md-5">
																			<input type="text" class="form-control" placeholder="一个文件名，100个字符" v-model="effectItem.effectParams.effect.effect_animation">
																		</div>
																	</div>
																	<div class="form-group">
																		<label class="col-md-5 control-label">小图标:</label>
																		<div class="col-md-5">
																			<input type="text" class="form-control" placeholder="一个图片名，100个字符" v-model="effectItem.effectParams.effect.tiny_icon">
																		</div>
																	</div>

																	<div class="form-group">
																		<label class="col-md-5 control-label">特效1:</label>
																		<div class="col-md-5">
																			<div class="btn-group">
																				<button type="button" class="btn btn-info btn-file">
																					<span class="glyphicon glyphicon-folder-open"></span>
																					<p>上传文件（json）</p>
																					<input type="file" class="form-control" @change="addFilename(effectItem.effectParams.effect, 'effect_effect_1', 'json', event)">
																				</button>
																				<button type="button" class="btn btn-danger" @click="deleteFilename(effectItem.effectParams.effect, 'effect_effect_1')"><span class="glyphicon glyphicon-trash"></span></button>
																			</div>
																		</div>
																		<div class="col-md-2 fileinfo">{{effectItem.effectParams.effect.effect_effect_1}}</div>
																	</div>
																	<div class="form-group">
																		<label class="col-md-5 control-label">特效2:</label>
																		<div class="col-md-5">
																			<div class="btn-group">
																				<button type="button" class="btn btn-info btn-file">
																					<span class="glyphicon glyphicon-folder-open"></span>
																					<p>上传文件（json）</p>
																					<input type="file" class="form-control" @change="addFilename(effectItem.effectParams.effect, 'effect_effect_2', 'json', event)">
																				</button>
																				<button type="button" class="btn btn-danger" @click="deleteFilename(effectItem.effectParams.effect, 'effect_effect_2')"><span class="glyphicon glyphicon-trash"></span></button>
																			</div>
																		</div>
																		<div class="col-md-2 fileinfo">{{effectItem.effectParams.effect.effect_effect_2}}</div>
																	</div>
																	<div class="form-group">
																		<label class="col-md-5 control-label">特效3:</label>
																		<div class="col-md-5">
																			<div class="btn-group">
																				<button type="button" class="btn btn-info btn-file">
																					<span class="glyphicon glyphicon-folder-open"></span>
																					<p>上传文件（json）</p>
																					<input type="file" class="form-control" @change="addFilename(effectItem.effectParams.effect, 'effect_effect_3', 'json', event)">
																				</button>
																				<button type="button" class="btn btn-danger" @click="deleteFilename(effectItem.effectParams.effect, 'effect_effect_3')"><span class="glyphicon glyphicon-trash"></span></button>
																			</div>
																		</div>
																		<div class="col-md-2 fileinfo">{{effectItem.effectParams.effect.effect_effect_3}}</div>
																	</div>


																	<div v-for="(buffItem, buffIndex) in buffConfig" v-if="effectItem.effectParams.effect.effect_type !== ''" >
																		<div v-for="(describeItem, describeIndex) in buffItem.describe">
																			<div v-if="effectItem.effectParams.effect.effect_type == buffItem.skill_effect">

																				<div class="form-group" v-if="typeof describeItem.details !== 'object'">
																					<label class="col-md-5 control-label"><i class="text-warning" v-text="'（'+describeItem.introduce+'）'"></i> {{describeItem.parameter}}:</label>
																					<div class="col-md-5">
																						<input type="text" class="form-control" v-model="effectItem.effectParams.effect['parameter_'+(describeIndex+1)]">
																					</div>
																				</div>

																				<div class="form-group" v-if="typeof describeItem.details === 'object'">
																					<label class="col-md-5 control-label"><i class="text-warning" v-text="'（'+describeItem.introduce+'）'"></i> {{describeItem.parameter}}:</label>
																					<div class="col-md-5">
																						<select class="form-control" value="0" @change="effectParamChange(effectItem.effectParams.effect, describeIndex, event)" v-model="effectItem.effectParams.effect['parameter_'+(describeIndex+1)]">
																							<option value="-1" disabled="disabled">—————请选择—————</option>
																							<option v-for="(detailItem, detailIndex) in describeItem.details" :value="detailItem.value">
																								{{detailItem.value + ' &nbsp;&nbsp;----&nbsp;&nbsp; ' + detailItem.introduce}}
																							</option>
																						</select>
																					</div>
																				</div>

																			</div>
																		</div>
																	</div>
																</div>
															</div>
															<!--↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑buffid↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑↑-->


															<div v-if="effectItem.effectMode === 4">
																<div class="form-group">
																	<label class="col-md-3 control-label">破坏范围<span class="text-danger">(0~1)</span>:</label>
																	<div class="col-md-4">
																		<input type="text" class="form-control" v-model="effectItem.effectParams.destroyRange">
																	</div>
																</div>
																<div class="form-group">
																	<label class="col-md-3 control-label">破坏外形:</label>
																	<div class="col-md-5" style="display: inline-block;">
																		<div class="btn-group">
																			<button type="button" class="btn btn-info btn-file">
																				<span class="glyphicon glyphicon-folder-open"></span>
																				<p>上传图片（png）</p>
																				<input type="file" class="form-control" name="source" @change="openImageOfDestroyedShape(effectItem, event)" >
																			</button>
																			<button type="button" class="btn btn-danger" @click="deleteImageOfDestroyedShape(effectItem)"><span class="glyphicon glyphicon-trash"></span></button>
																		</div>
																	</div>
																	<div class="col-md-2 fileinfo">{{effectItem.effectParams.destroyShape}}</div>
																</div>
																<div class="form-group">
																	<label class="col-md-3 control-label">破坏后边缘:</label>
																	<div class="col-md-5" style="display: inline-block;">
																		<div class="btn-group">
																			<button type="button" class="btn btn-info btn-file">
																				<span class="glyphicon glyphicon-folder-open"></span>
																				<p>上传图片（png）</p>
																				<input type="file" class="form-control" name="source" @change="addFilename(effectItem.effectParams, 'destroyEdge', 'png', event)">
																			</button>
																			<button type="button" class="btn btn-danger" @click="deleteFilename(effectItem.effectParams, 'destroyEdge')"><span class="glyphicon glyphicon-trash"></span></button>
																		</div>
																	</div>
																	<div class="col-md-2 fileinfo">{{effectItem.effectParams.destroyEdge}}</div>
																</div>
															</div>

															<div v-if="effectItem.effectMode === 5">
																<div class="form-group">
																	<label class="col-md-3 control-label">效果（美术）:</label>
																	<div class="col-md-5" style="display: inline-block;">
																		<div class="btn-group">
																			<button type="button" class="btn btn-info btn-file">
																				<span class="glyphicon glyphicon-folder-open"></span>
																				<p>上传文件（json）</p>
																				<input type="file" class="form-control" @change="addFilename(effectItem, 'effectParams', 'json', event)">
																			</button>
																			<button type="button" class="btn btn-danger" @click="deleteFilename(effectItem, 'effectParams')"><span class="glyphicon glyphicon-trash"></span></button>
																		</div>
																	</div>
																	<div class="col-md-2 fileinfo">{{effectItem.effectParams}}</div>
																</div>
															</div>

															<div v-if="effectItem.effectMode === 6">
																<button type="button" class="btn btn-success btn-sm" @click="addBullet(bulletIndex, cycleIndex, triggerIndex, effectIndex)">ADD(添加弹头)</button>
																<br /><br />
																<div class="form-group" v-for="(bulletItem , bulletInnerIndex) in BulletConfig.bullets" v-show="bulletItem._bulletIndex == bulletIndex && bulletItem._cycleIndex == cycleIndex && bulletItem._triggerIndex == triggerIndex && bulletItem._effectIndex == effectIndex">
																	<label class="col-md-3 control-label" v-text="'弹头ID' + (bulletItem.id) + ':'"></label>
																	<div class="col-md-4">
																		<input type="text" class="form-control" placeholder="例:0"  v-model="bulletItem.launchTime">
																	</div>
																	<div class="col-md-4">
																		<a href="###" class="btn btn-danger btn-xs" @click="deleteBullet(bulletItem.id , effectItem)"><span class="glyphicon glyphicon-trash"></span></a>
																	</div>
																</div>
															</div>

															<div v-if="effectItem.effectMode === 7">
																<div class="form-group">
																	<label class="col-md-3 control-label">时长<span class="text-danger"></span>:</label>
																	<div class="col-md-4">
																		<input type="text" class="form-control" v-model="effectItem.effectParams">
																	</div>
																</div>
															</div>

															<div v-if="effectItem.effectMode === 8">
																<div class="form-group">
																	<label class="col-md-3 control-label">动画:</label>
																	<div class="col-md-4">
																		<select class="form-control" v-model="effectItem.effectParams.animation">
																			<option v-for="(animation, animationIndex) in bulletItem._animations" :value="animation" v-html="animation"></option>
																		</select>
																	</div>
																</div>
																<div class="form-group">
																	<label class="col-md-3 control-label">动画是否持续播放:</label>
																	<div class="btn-group col-md-9" data-toggle="buttons">
																		<label class="btn btn-info" :class="{active:effectItem.effectParams.keepPlay === true}" @click="effectItem.effectParams.keepPlay = true">
																			<input type="radio" name="keepPlay">是
																		</label>
																		<label class="btn btn-info" :class="{active:effectItem.effectParams.keepPlay === false}" @click="effectItem.effectParams.keepPlay = false">
																			<input type="radio" name="keepPlay">无
																		</label>
																	</div>
																</div>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
								<!--编辑区 END-->

								<!--下载-->
								<div class="col-xs-12">
									<hr>
									<button type="button" class="btn btn-primary btn-block btn-lg" @click="download()">下载</button>
								</div>
								<!--下载-->
							</div>
						</div><!-- .panel-body -->
					</div><!-- panel panel-default -->
				</div><!-- .row -->
			</div><!-- .container -->
		</div><!-- #shellEditor -->

		<!--<script src="../js/lib/jquery.min.js"></script>-->
		<!--<script src="../js/lib/bootstrap.min.js"></script>-->
		<!--<script src="../js/lib/vue.min.js"></script>-->
		<!--<script src="../js/lib/vue-resource.min.js"></script>-->
		<!--<script src="../js/lib/download.js"></script>-->
		<!--<script src="../js/lib/underscore.js"></script>-->
		<!--<script src="../js/util/cyber.utils.js"></script>-->
        <!--<script src="../js/app/cyber.pngEdge.js"></script>-->
		<!--<script src="../js/config/bulletEditor.config.js"></script>-->
		<!--<script src="../js/dist/bulletEditor.js"></script>-->

		<script type="text/javascript">
            let scriptArr = [
                "../js/lib/jquery.min.js",
                "../js/lib/bootstrap.min.js",
                "../js/lib/vue.min.js",
                "../js/lib/vue-resource.min.js",
                "../js/lib/download.js",
                "../js/lib/underscore.js",
                "../js/util/cyber.utils.js",
                "../js/app/cyber.pngEdge.js",
                "../js/config/bulletEditor.config.js",
                "../js/dist/bulletEditor.js"
            ];

            for (let i = 0; i < scriptArr.length; i++) {
                //js后缀加个时间戳每回更新都会改变，浏览器视其为新的js不会进行缓存
                document.write('<script type="text/javascript" src="' + scriptArr[i] + '?time=' + new Date().getTime() + '"><'+'/'+'script>');
            }
		</script>
	</body>
</html>
